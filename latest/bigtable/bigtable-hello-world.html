<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Bigtable C++ Client: Example: C++ Hello World Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Bigtable C++ Client
   &#160;<span id="projectnumber">0.11.0</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Bigtable</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example: C++ Hello World Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example is a very simple "hello world" application, written in C++, that illustrates how to:</p>
<ul>
<li>Connect to a Cloud Bigtable instance.</li>
<li>Create a new table.</li>
<li>Write data to the table.</li>
<li>Read the data back.</li>
<li>Delete the table.</li>
</ul>
<h2>Running the example</h2>
<p>This example uses the <a href="https://googleapis.github.io/google-cloud-cpp">Cloud Bigtable C++ Client Library</a> to communicate with Cloud Bigtable.</p>
<p>To run the example program, follow the <a href="https://github.com/googleapis/google-cloud-cpp/tree/master/google/cloud/bigtable/examples/">instructions</a> for the example on GitHub.</p>
<h2>Including the Necessary Headers</h2>
<p>The example uses the following headers:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="table_8h.html">google/cloud/bigtable/table.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="table__admin_8h.html">google/cloud/bigtable/table_admin.h</a>&quot;</span></div></div><!-- fragment --> <h2>Introduce aliases to make the example more readable</h2>
<div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1bigtable.html">cbt</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable.html">google::cloud::bigtable</a>;</div><div class="line">  <span class="keyword">using</span> google::cloud::StatusOr;</div></div><!-- fragment --> <h2>Connecting to Cloud Bigtable to manage tables</h2>
<p>To manage tables, connect to Cloud Bigtable using <code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a14cc332b66e0445da556dc17fe333016" title="Create a new admin client configured via options. ">bigtable::CreateDefaultAdminClient()</a></code>:</p>
<div class="fragment"><div class="line">  cbt::TableAdmin table_admin(</div><div class="line">      <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a14cc332b66e0445da556dc17fe333016">cbt::CreateDefaultAdminClient</a>(project_id, cbt::ClientOptions()),</div><div class="line">      instance_id);</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1TableAdmin.html">bigtable::TableAdmin</a> for more information on how to perform administrative operations on tables.</dd></dl>
<h2>Creating a table</h2>
<p>Create a table with <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1TableAdmin.html#a509201812b3786d2ce887454f76f141d">TableAdmin::CreateTable()</a>:</p>
<div class="fragment"><div class="line">  <span class="comment">// Define the desired schema for the Table.</span></div><div class="line">  cbt::GcRule gc_rule = cbt::GcRule::MaxNumVersions(1);</div><div class="line">  cbt::TableConfig schema({{<span class="stringliteral">&quot;family&quot;</span>, gc_rule}}, {});</div><div class="line"></div><div class="line">  <span class="comment">// Create a table.</span></div><div class="line">  StatusOr&lt;google::bigtable::admin::v2::Table&gt; returned_schema =</div><div class="line">      table_admin.CreateTable(table_id, schema);</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1TableAdmin.html">bigtable::TableAdmin</a> for additional operations to list, read, modify, and delete tables. </dd>
<dd>
<a href="https://cloud.google.com/bigtable/docs/overview">https://cloud.google.com/bigtable/docs/overview</a> for an overview of the Cloud Bigtable storage model, including an introduction to important Cloud Bigtable concepts, such as <em>row keys</em>, <em>column families</em>, <em>columns</em>, and <em>cells</em>. </dd>
<dd>
<a href="https://cloud.google.com/bigtable/docs/schema-design">https://cloud.google.com/bigtable/docs/schema-design</a> for suggestions on how to design your table schema.</dd></dl>
<h2>Connecting to Cloud Bigtable to read and write data</h2>
<p>To read and write data, connect to Cloud Bigtable using <code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#ad04b836c839640c3e4474eec5f17cbff" title="Create the default implementation of ClientInterface. ">bigtable::CreateDefaultDataClient()</a></code>:</p>
<div class="fragment"><div class="line">  cbt::Table table(<a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#ad04b836c839640c3e4474eec5f17cbff">cbt::CreateDefaultDataClient</a>(project_id, instance_id,</div><div class="line">                                                cbt::ClientOptions()),</div><div class="line">                   table_id);</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html">bigtable::Table</a> for the functions to read and write data to Cloud Bigtable.</dd></dl>
<h2>Writing Rows to a table</h2>
<p>To write a single row use <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#a078643ebc15409656f987ffd37db658c">Table::Apply()</a>:</p>
<div class="fragment"><div class="line">  std::vector&lt;std::string&gt; greetings{<span class="stringliteral">&quot;Hello World!&quot;</span>, <span class="stringliteral">&quot;Hello Cloud Bigtable!&quot;</span>,</div><div class="line">                                     <span class="stringliteral">&quot;Hello C++!&quot;</span>};</div><div class="line">  <span class="keywordtype">int</span> i = 0;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; greeting : greetings) {</div><div class="line">    <span class="comment">// Each row has a unique row key.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// Note: This example uses sequential numeric IDs for simplicity, but</span></div><div class="line">    <span class="comment">// this can result in poor performance in a production application.</span></div><div class="line">    <span class="comment">// Since rows are stored in sorted order by key, sequential keys can</span></div><div class="line">    <span class="comment">// result in poor distribution of operations across nodes.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// For more information about how to design a Bigtable schema for the</span></div><div class="line">    <span class="comment">// best performance, see the documentation:</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">//     https://cloud.google.com/bigtable/docs/schema-design</span></div><div class="line">    std::string row_key = <span class="stringliteral">&quot;key-&quot;</span> + std::to_string(i);</div><div class="line">    google::cloud::Status status = table.Apply(cbt::SingleRowMutation(</div><div class="line">        std::move(row_key), <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a24adeb58de68ffc7a792f42b8391ce18">cbt::SetCell</a>(<span class="stringliteral">&quot;family&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>, greeting)));</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!status.ok()) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">    }</div><div class="line">    ++i;</div><div class="line">  }</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#a6468a7850ecf45a3dbc633b0bffdd134">Table::BulkApply()</a> to modify multiple rows in a single request. </dd>
<dd>
<code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a025435285286675f07acbdffe6810edb" title="Create a mutation to delete all the cells in a column family. ">DeleteFromFamily()</a></code>, <code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a701e766d44e856d4e11cbb7f80f1a9a2" title="Create a mutation to delete all the cells in a row. ">DeleteFromRow()</a></code>, <code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a49600fa2184026ec8e388d7c3b092f07">DeleteFromColumn()</a></code> to delete some (or all) the cells in a row. </dd>
<dd>
One of the overloads for <code><a class="el" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a24adeb58de68ffc7a792f42b8391ce18" title="Create a mutation to set a cell value. ">SetCell()</a></code> allows setting an explicit timestamp, which is an idempotent mutation and thus can be automatically retried on transient errors.</dd></dl>
<h2>Creating filter for the column families</h2>
<p>Use a filter to select only a subset of the cells in a row, in this case, we will select only the rows in the <code>family</code> column family and the <code>c0</code> column:</p>
<div class="fragment"><div class="line">  cbt::Filter filter = cbt::Filter::ColumnRangeClosed(<span class="stringliteral">&quot;family&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>);</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Filter.html">bigtable::Filter</a> to filter the column families, columns, and even the timestamps returned by <code>ReadRow()</code>.</dd></dl>
<h2>Reading data back: get a single row by its key</h2>
<p>Get a row directly using its key with <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#ac3eb95924778b80d60ebc9ead2036650">Table::ReadRow()</a>:</p>
<div class="fragment"><div class="line">  StatusOr&lt;std::pair&lt;bool, cbt::Row&gt;&gt; result = table.ReadRow(<span class="stringliteral">&quot;key-0&quot;</span>, filter);</div><div class="line">  <span class="keywordflow">if</span> (!result) {</div><div class="line">    <span class="keywordflow">throw</span> std::runtime_error(result.status().message());</div><div class="line">  }</div><div class="line">  <span class="keywordflow">if</span> (!result-&gt;first) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Cannot find row &#39;key-0&#39; in the table: &quot;</span> &lt;&lt; table.table_name()</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">  }</div><div class="line">  cbt::Cell <span class="keyword">const</span>&amp; cell = result-&gt;second.cells().front();</div><div class="line">  std::cout &lt;&lt; cell.family_name() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; cell.column_qualifier() &lt;&lt; <span class="stringliteral">&quot;    @ &quot;</span></div><div class="line">            &lt;&lt; cell.timestamp().count() &lt;&lt; <span class="stringliteral">&quot;us\n&quot;</span></div><div class="line">            &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; cell.value() &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Filter.html">bigtable::Filter</a> to filter the column families, columns, and even the timestamps returned by <code>ReadRow()</code>. </dd>
<dd>
<a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#a07fd0b3bc5b4fc17db8e3f099aaf9c33">Table::ReadRows()</a> to iterate over multiple rows.</dd></dl>
<h2>Reading data back: scanning all table rows</h2>
<p>Use <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#a07fd0b3bc5b4fc17db8e3f099aaf9c33">Table::ReadRows()</a> to scan all of the rows in a table.</p>
<div class="fragment"><div class="line">  <span class="keywordflow">for</span> (StatusOr&lt;cbt::Row&gt; <span class="keyword">const</span>&amp; row : table.ReadRows(</div><div class="line">           cbt::RowRange::InfiniteRange(), cbt::Filter::PassAllFilter())) {</div><div class="line">    <span class="keywordflow">if</span> (!row) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(row.status().message());</div><div class="line">    }</div><div class="line">    std::cout &lt;&lt; row-&gt;row_key() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div><div class="line">    <span class="keywordflow">for</span> (cbt::Cell <span class="keyword">const</span>&amp; cell : row-&gt;cells()) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; cell.family_name() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; cell.column_qualifier()</div><div class="line">                &lt;&lt; <span class="stringliteral">&quot;    @ &quot;</span> &lt;&lt; cell.timestamp().count() &lt;&lt; <span class="stringliteral">&quot;us\n&quot;</span></div><div class="line">                &lt;&lt; <span class="stringliteral">&quot;\t\&quot;&quot;</span> &lt;&lt; cell.value() &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    }</div><div class="line">  }</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1RowRange.html">bigtable::RowRange</a> to read only a portion of the table. </dd>
<dd>
<a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1RowSet.html">bigtable::RowSet</a> to form arbitrary groups of ranges and specific row keys in a <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Table.html#a07fd0b3bc5b4fc17db8e3f099aaf9c33">Table::ReadRows()</a> request. </dd>
<dd>
<a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1Row.html">bigtable::Row</a> for details of the contents in a row.</dd></dl>
<h2>Deleting a table</h2>
<p>Delete a table with <a class="el" href="classgoogle_1_1cloud_1_1bigtable_1_1v0_1_1TableAdmin.html#a325e2122b59fd65930d668ebcd0dc519">TableAdmin::DeleteTable()</a>.</p>
<div class="fragment"><div class="line">  google::cloud::Status status = table_admin.DeleteTable(table_id);</div><div class="line">  <span class="keywordflow">if</span> (!status.ok()) {</div><div class="line">    <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">  }</div></div><!-- fragment --> <h2>Putting it all together</h2>
<p>Here is the full example</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="table_8h.html">google/cloud/bigtable/table.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="table__admin_8h.html">google/cloud/bigtable/table_admin.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="bigtable__hello__app__profile_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) <span class="keyword">try</span> {</div><div class="line">  <span class="keywordflow">if</span> (argc != 4) {</div><div class="line">    std::string <span class="keyword">const</span> cmd = argv[0];</div><div class="line">    <span class="keyword">auto</span> last_slash = std::string(cmd).find_last_of(<span class="charliteral">&#39;/&#39;</span>);</div><div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; cmd.substr(last_slash + 1)</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot; &lt;project_id&gt; &lt;instance_id&gt; &lt;table_id&gt;\n&quot;</span>;</div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">  }</div><div class="line"></div><div class="line">  std::string <span class="keyword">const</span> project_id = argv[1];</div><div class="line">  std::string <span class="keyword">const</span> instance_id = argv[2];</div><div class="line">  std::string <span class="keyword">const</span> table_id = argv[3];</div><div class="line"></div><div class="line">  <span class="comment">// Create a namespace alias to make the code easier to read.</span></div><div class="line"><span class="comment"></span>  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1bigtable.html">cbt</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable.html">google::cloud::bigtable</a>;</div><div class="line">  <span class="keyword">using</span> google::cloud::StatusOr;</div><div class="line"></div><div class="line">  <span class="comment">// Connect to the Cloud Bigtable Admin API.</span></div><div class="line"><span class="comment"></span>  cbt::TableAdmin table_admin(</div><div class="line">      <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a14cc332b66e0445da556dc17fe333016">cbt::CreateDefaultAdminClient</a>(project_id, cbt::ClientOptions()),</div><div class="line">      instance_id);</div><div class="line"></div><div class="line">  <span class="comment">// Define the desired schema for the Table.</span></div><div class="line">  cbt::GcRule gc_rule = cbt::GcRule::MaxNumVersions(1);</div><div class="line">  cbt::TableConfig schema({{<span class="stringliteral">&quot;family&quot;</span>, gc_rule}}, {});</div><div class="line"></div><div class="line">  <span class="comment">// Create a table.</span></div><div class="line">  StatusOr&lt;google::bigtable::admin::v2::Table&gt; returned_schema =</div><div class="line">      table_admin.CreateTable(table_id, schema);</div><div class="line"></div><div class="line">  <span class="comment">// Create an object to access the Cloud Bigtable Data API.</span></div><div class="line"><span class="comment"></span>  cbt::Table table(<a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#ad04b836c839640c3e4474eec5f17cbff">cbt::CreateDefaultDataClient</a>(project_id, instance_id,</div><div class="line">                                                cbt::ClientOptions()),</div><div class="line">                   table_id);</div><div class="line"></div><div class="line">  <span class="comment">// Modify (and create if necessary) a row.</span></div><div class="line"><span class="comment"></span>  std::vector&lt;std::string&gt; greetings{<span class="stringliteral">&quot;Hello World!&quot;</span>, <span class="stringliteral">&quot;Hello Cloud Bigtable!&quot;</span>,</div><div class="line">                                     <span class="stringliteral">&quot;Hello C++!&quot;</span>};</div><div class="line">  <span class="keywordtype">int</span> i = 0;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; greeting : greetings) {</div><div class="line">    <span class="comment">// Each row has a unique row key.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// Note: This example uses sequential numeric IDs for simplicity, but</span></div><div class="line">    <span class="comment">// this can result in poor performance in a production application.</span></div><div class="line">    <span class="comment">// Since rows are stored in sorted order by key, sequential keys can</span></div><div class="line">    <span class="comment">// result in poor distribution of operations across nodes.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// For more information about how to design a Bigtable schema for the</span></div><div class="line">    <span class="comment">// best performance, see the documentation:</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">//     https://cloud.google.com/bigtable/docs/schema-design</span></div><div class="line">    std::string row_key = <span class="stringliteral">&quot;key-&quot;</span> + std::to_string(i);</div><div class="line">    google::cloud::Status status = table.Apply(cbt::SingleRowMutation(</div><div class="line">        std::move(row_key), <a class="code" href="namespacegoogle_1_1cloud_1_1bigtable_1_1v0.html#a24adeb58de68ffc7a792f42b8391ce18">cbt::SetCell</a>(<span class="stringliteral">&quot;family&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>, greeting)));</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!status.ok()) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">    }</div><div class="line">    ++i;</div><div class="line">  }</div><div class="line"></div><div class="line">  cbt::Filter filter = cbt::Filter::ColumnRangeClosed(<span class="stringliteral">&quot;family&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>, <span class="stringliteral">&quot;c0&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Read a single row.</span></div><div class="line"><span class="comment"></span>  StatusOr&lt;std::pair&lt;bool, cbt::Row&gt;&gt; result = table.ReadRow(<span class="stringliteral">&quot;key-0&quot;</span>, filter);</div><div class="line">  <span class="keywordflow">if</span> (!result) {</div><div class="line">    <span class="keywordflow">throw</span> std::runtime_error(result.status().message());</div><div class="line">  }</div><div class="line">  <span class="keywordflow">if</span> (!result-&gt;first) {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Cannot find row &#39;key-0&#39; in the table: &quot;</span> &lt;&lt; table.table_name()</div><div class="line">              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">  }</div><div class="line">  cbt::Cell <span class="keyword">const</span>&amp; cell = result-&gt;second.cells().front();</div><div class="line">  std::cout &lt;&lt; cell.family_name() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; cell.column_qualifier() &lt;&lt; <span class="stringliteral">&quot;    @ &quot;</span></div><div class="line">            &lt;&lt; cell.timestamp().count() &lt;&lt; <span class="stringliteral">&quot;us\n&quot;</span></div><div class="line">            &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; cell.value() &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Read all rows.</span></div><div class="line"><span class="comment"></span>  <span class="keywordflow">for</span> (StatusOr&lt;cbt::Row&gt; <span class="keyword">const</span>&amp; row : table.ReadRows(</div><div class="line">           cbt::RowRange::InfiniteRange(), cbt::Filter::PassAllFilter())) {</div><div class="line">    <span class="keywordflow">if</span> (!row) {</div><div class="line">      <span class="keywordflow">throw</span> std::runtime_error(row.status().message());</div><div class="line">    }</div><div class="line">    std::cout &lt;&lt; row-&gt;row_key() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div><div class="line">    <span class="keywordflow">for</span> (cbt::Cell <span class="keyword">const</span>&amp; cell : row-&gt;cells()) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; cell.family_name() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; cell.column_qualifier()</div><div class="line">                &lt;&lt; <span class="stringliteral">&quot;    @ &quot;</span> &lt;&lt; cell.timestamp().count() &lt;&lt; <span class="stringliteral">&quot;us\n&quot;</span></div><div class="line">                &lt;&lt; <span class="stringliteral">&quot;\t\&quot;&quot;</span> &lt;&lt; cell.value() &lt;&lt; <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">    }</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Delete the table</span></div><div class="line"><span class="comment"></span>  google::cloud::Status status = table_admin.DeleteTable(table_id);</div><div class="line">  <span class="keywordflow">if</span> (!status.ok()) {</div><div class="line">    <span class="keywordflow">throw</span> std::runtime_error(status.message());</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="keywordflow">catch</span> (std::exception <span class="keyword">const</span>&amp; ex) {</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Standard C++ exception raised: &quot;</span> &lt;&lt; ex.what() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  <span class="keywordflow">return</span> 1;</div><div class="line">}</div></div><!-- fragment --></div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
