<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Pub/Sub C++ Client: google::cloud::pubsub::v1::SubscriptionOptions Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Pub/Sub C++ Client
   &#160;<span id="projectnumber">0.0.0(dev)</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Pub/Sub</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegoogle.html">google</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud.html">cloud</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1pubsub.html">pubsub</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1pubsub_1_1v1.html">v1</a></li><li class="navelem"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google::cloud::pubsub::v1::SubscriptionOptions Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Configure how a subscription handles incoming messages.  
 <a href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="subscription__options_8h_source.html">google/cloud/pubsub/subscription_options.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4f7f786e6938dd2060dfe363a13d9297"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a4f7f786e6938dd2060dfe363a13d9297">SubscriptionOptions</a> ()=default</td></tr>
<tr class="separator:a4f7f786e6938dd2060dfe363a13d9297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac079e189fe7027f88b0fb39070613e22"><td class="memItemLeft" align="right" valign="top">std::chrono::seconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#ac079e189fe7027f88b0fb39070613e22">max_deadline_time</a> () const</td></tr>
<tr class="memdesc:ac079e189fe7027f88b0fb39070613e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum deadline for each incoming message.  <a href="#ac079e189fe7027f88b0fb39070613e22">More...</a><br /></td></tr>
<tr class="separator:ac079e189fe7027f88b0fb39070613e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f94d17d13fff644a416bfd0c09124f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a78f94d17d13fff644a416bfd0c09124f">set_max_deadline_time</a> (std::chrono::seconds d)</td></tr>
<tr class="memdesc:a78f94d17d13fff644a416bfd0c09124f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum deadline for incoming messages.  <a href="#a78f94d17d13fff644a416bfd0c09124f">More...</a><br /></td></tr>
<tr class="separator:a78f94d17d13fff644a416bfd0c09124f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d5c23cdc8ec1d95bd7f8031d7c157d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a51d5c23cdc8ec1d95bd7f8031d7c157d">set_message_count_watermarks</a> (std::size_t lwm, std::size_t hwm)</td></tr>
<tr class="memdesc:a51d5c23cdc8ec1d95bd7f8031d7c157d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the parameters for message-count-based flow control.  <a href="#a51d5c23cdc8ec1d95bd7f8031d7c157d">More...</a><br /></td></tr>
<tr class="separator:a51d5c23cdc8ec1d95bd7f8031d7c157d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5223efa0378b7ad7ca44917b1302ab"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#aec5223efa0378b7ad7ca44917b1302ab">message_count_lwm</a> () const</td></tr>
<tr class="separator:aec5223efa0378b7ad7ca44917b1302ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c891c2a1cca76ecc6fb1f2e4613319"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a47c891c2a1cca76ecc6fb1f2e4613319">message_count_hwm</a> () const</td></tr>
<tr class="separator:a47c891c2a1cca76ecc6fb1f2e4613319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07ba86e5d31807ed11b9b6d3ffacf3d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a07ba86e5d31807ed11b9b6d3ffacf3d2">set_message_size_watermarks</a> (std::size_t lwm, std::size_t hwm)</td></tr>
<tr class="memdesc:a07ba86e5d31807ed11b9b6d3ffacf3d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the parameters for message-size-based flow control.  <a href="#a07ba86e5d31807ed11b9b6d3ffacf3d2">More...</a><br /></td></tr>
<tr class="separator:a07ba86e5d31807ed11b9b6d3ffacf3d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae347e5acc4bca6e50fce8d5576253df6"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#ae347e5acc4bca6e50fce8d5576253df6">message_size_lwm</a> () const</td></tr>
<tr class="separator:ae347e5acc4bca6e50fce8d5576253df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b5aa19a50d65ea00314228a468f6fd"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a24b5aa19a50d65ea00314228a468f6fd">message_size_hwm</a> () const</td></tr>
<tr class="separator:a24b5aa19a50d65ea00314228a468f6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae318d01d73b994a1773022e78c1d1cee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#ae318d01d73b994a1773022e78c1d1cee">set_concurrency_watermarks</a> (std::size_t lwm, std::size_t hwm)</td></tr>
<tr class="memdesc:ae318d01d73b994a1773022e78c1d1cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the high watermark and low watermarks for callback concurrency.  <a href="#ae318d01d73b994a1773022e78c1d1cee">More...</a><br /></td></tr>
<tr class="separator:ae318d01d73b994a1773022e78c1d1cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112e06f9296080a9d64e840fdacb0f74"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a112e06f9296080a9d64e840fdacb0f74">concurrency_lwm</a> () const</td></tr>
<tr class="separator:a112e06f9296080a9d64e840fdacb0f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d452cdade021e24b70a39692d69c3cb"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html#a8d452cdade021e24b70a39692d69c3cb">concurrency_hwm</a> () const</td></tr>
<tr class="separator:a8d452cdade021e24b70a39692d69c3cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Configure how a subscription handles incoming messages. </p>

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00030">30</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4f7f786e6938dd2060dfe363a13d9297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f7f786e6938dd2060dfe363a13d9297">&#9670;&nbsp;</a></span>SubscriptionOptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">google::cloud::pubsub::v1::SubscriptionOptions::SubscriptionOptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8d452cdade021e24b70a39692d69c3cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d452cdade021e24b70a39692d69c3cb">&#9670;&nbsp;</a></span>concurrency_hwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::concurrency_hwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00141">141</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="a112e06f9296080a9d64e840fdacb0f74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112e06f9296080a9d64e840fdacb0f74">&#9670;&nbsp;</a></span>concurrency_lwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::concurrency_lwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00140">140</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="ac079e189fe7027f88b0fb39070613e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac079e189fe7027f88b0fb39070613e22">&#9670;&nbsp;</a></span>max_deadline_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::seconds google::cloud::pubsub::v1::SubscriptionOptions::max_deadline_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum deadline for each incoming message. </p>
<p>Configure how long does the application have to respond (ACK or NACK) an incoming message. Note that this might be longer, or shorter, than the deadline configured in the server-side subcription.</p>
<p>The value <code>0</code> is reserved to leave the deadline unmodified and just use the server-side configuration.</p>
<dl class="section note"><dt>Note</dt><dd>The deadline applies to each message as it is delivered to the application, thus, if the library receives a batch of N messages their deadline for all the messages is extended repeatedly. Only once the message is delivered to a callback does the deadline become immutable. </dd></dl>

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00049">49</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="a47c891c2a1cca76ecc6fb1f2e4613319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c891c2a1cca76ecc6fb1f2e4613319">&#9670;&nbsp;</a></span>message_count_hwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::message_count_hwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00080">80</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="aec5223efa0378b7ad7ca44917b1302ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec5223efa0378b7ad7ca44917b1302ab">&#9670;&nbsp;</a></span>message_count_lwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::message_count_lwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00079">79</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="a24b5aa19a50d65ea00314228a468f6fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b5aa19a50d65ea00314228a468f6fd">&#9670;&nbsp;</a></span>message_size_hwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::message_size_hwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00106">106</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="ae347e5acc4bca6e50fce8d5576253df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae347e5acc4bca6e50fce8d5576253df6">&#9670;&nbsp;</a></span>message_size_lwm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t google::cloud::pubsub::v1::SubscriptionOptions::message_size_lwm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00105">105</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="ae318d01d73b994a1773022e78c1d1cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae318d01d73b994a1773022e78c1d1cee">&#9670;&nbsp;</a></span>set_concurrency_watermarks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp; google::cloud::pubsub::v1::SubscriptionOptions::set_concurrency_watermarks </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>lwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>hwm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the high watermark and low watermarks for callback concurrency. </p>
<p>The Cloud Pub/Sub C++ client library will schedule parallel callbacks as long as the number of outstanding callbacks is less than the high watermark. Once the watermark is reached the client will not resume scheduling callbacks until the number of outstanding callbacks is at or below the low watermark. Using hysteresis prevents instability.</p>
<p>Note that this controls the number of callbacks <em>scheduled</em>, not the number of callbacks actually executing at a time. The application needs to create (or configure) the background threads pool with enough parallelism to execute more than one callback at a time.</p>
<p>Some applications many want to share a thread pool across many subscriptions, the additional level of control (scheduled vs. running callbacks) allows applications, for example, to ensure that at most <code>K</code> threads in the pool are used by any given subscription.</p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">pubsub</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">google::cloud::pubsub</a>;</div><div class="line">  <span class="keyword">using</span> google::cloud::future;</div><div class="line">  <span class="keyword">using</span> google::cloud::StatusOr;</div><div class="line">  [](std::string project_id, std::string subscription_id) {</div><div class="line">    <span class="comment">// Create a subscriber with 16 threads handling I/O work, by default the</span></div><div class="line">    <span class="comment">// library creates `std::thread::hardware_concurrency()` threads.</span></div><div class="line">    <span class="keyword">auto</span> subscriber = pubsub::Subscriber(<a class="code" href="namespacegoogle_1_1cloud_1_1pubsub_1_1v1.html#a2258e0ef7da16c922aed9cc69416d164">pubsub::MakeSubscriberConnection</a>(</div><div class="line">        <a class="code" href="namespacegoogle_1_1cloud_1_1pubsub_1_1v1.html#a6833bef0c593e2cfde6e1c9f2d745b94">pubsub::ConnectionOptions</a>{}.set_background_thread_pool_size(16)));</div><div class="line">    <span class="keyword">auto</span> subscription =</div><div class="line">        pubsub::Subscription(std::move(project_id), std::move(subscription_id));</div><div class="line"></div><div class="line">    std::mutex mu;</div><div class="line">    std::condition_variable cv;</div><div class="line">    <span class="keywordtype">int</span> count = 0;</div><div class="line">    <span class="keyword">auto</span> constexpr kExpectedMessageCount = 4;</div><div class="line">    <span class="keyword">auto</span> handler = [&amp;](pubsub::Message <span class="keyword">const</span>&amp; m, pubsub::AckHandler h) {</div><div class="line">      <span class="comment">// This handler executes in the I/O threads, applications could use,</span></div><div class="line">      <span class="comment">// std::async(), a thread-pool,</span></div><div class="line">      <span class="comment">// google::cloud::CompletionQueue::RunAsync(), or any other mechanism to</span></div><div class="line">      <span class="comment">// transfer the execution to other threads.</span></div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Received message &quot;</span> &lt;&lt; m &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      std::move(h).ack();</div><div class="line">      {</div><div class="line">        std::lock_guard&lt;std::mutex&gt; lk(mu);</div><div class="line">        <span class="keywordflow">if</span> (++count &lt; kExpectedMessageCount) <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      cv.notify_one();</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">// Create a subscription where up to 8 messages are handled concurrently. By</span></div><div class="line">    <span class="comment">// default the library uses `0` and `std::thread::hardwarde_concurrency()`</span></div><div class="line">    <span class="comment">// for the concurrency watermarks.</span></div><div class="line">    <span class="keyword">auto</span> session = subscriber.Subscribe(</div><div class="line">        subscription, std::move(handler),</div><div class="line">        pubsub::SubscriptionOptions{}.set_concurrency_watermarks(</div><div class="line">            <span class="comment">/*lwm=*/</span>4, <span class="comment">/*hwm=*/</span>8));</div><div class="line">    {</div><div class="line">      std::unique_lock&lt;std::mutex&gt; lk(mu);</div><div class="line">      cv.wait(lk, [&amp;] { <span class="keywordflow">return</span> count &gt;= kExpectedMessageCount; });</div><div class="line">    }</div><div class="line">    session.cancel();</div><div class="line">    <span class="keyword">auto</span> status = session.get();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Message count: &quot;</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;, status: &quot;</span> &lt;&lt; status &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  }</div></div><!-- fragment --> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>applications that want to have a single outstanding callback can set these parameters to <code>lwm==0</code> and <code>hwm==1</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwm</td><td>the high watermark, if this parameter is <code>0</code> the high watermark is set to <code>1</code>, to avoid starvation for the callbacks </td></tr>
    <tr><td class="paramname">lwm</td><td>the low watermark, if this parameter greater than <code>hwm</code> then the low watermark is set to the same value as the high watermark </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="subscription__options_8cc_source.html#l00037">37</a> of file <a class="el" href="subscription__options_8cc_source.html">subscription_options.cc</a>.</p>

</div>
</div>
<a id="a78f94d17d13fff644a416bfd0c09124f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78f94d17d13fff644a416bfd0c09124f">&#9670;&nbsp;</a></span>set_max_deadline_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a>&amp; google::cloud::pubsub::v1::SubscriptionOptions::set_max_deadline_time </td>
          <td>(</td>
          <td class="paramtype">std::chrono::seconds&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the maximum deadline for incoming messages. </p>

<p class="definition">Definition at line <a class="el" href="subscription__options_8h_source.html#l00052">52</a> of file <a class="el" href="subscription__options_8h_source.html">subscription_options.h</a>.</p>

</div>
</div>
<a id="a51d5c23cdc8ec1d95bd7f8031d7c157d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51d5c23cdc8ec1d95bd7f8031d7c157d">&#9670;&nbsp;</a></span>set_message_count_watermarks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp; google::cloud::pubsub::v1::SubscriptionOptions::set_message_count_watermarks </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>lwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>hwm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the parameters for message-count-based flow control. </p>
<p>The Cloud Pub/Sub C++ client library will pull more messages from a subscription as long as the number of pending messages (that is received, but not fully processed is less than the high watermark (<code>hwm</code>). Once the <code>hwm</code> value is reached the client will not pull more messages until the number of pending messages is at or below the low watermark (<code>lwm</code>).</p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">pubsub</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">google::cloud::pubsub</a>;</div><div class="line">  <span class="keyword">using</span> google::cloud::future;</div><div class="line">  <span class="keyword">using</span> google::cloud::StatusOr;</div><div class="line">  [](pubsub::Subscriber subscriber, pubsub::Subscription <span class="keyword">const</span>&amp; subscription) {</div><div class="line">    std::mutex mu;</div><div class="line">    std::condition_variable cv;</div><div class="line">    <span class="keywordtype">int</span> count = 0;</div><div class="line">    <span class="keyword">auto</span> constexpr kExpectedMessageCount = 4;</div><div class="line">    <span class="keyword">auto</span> handler = [&amp;](pubsub::Message <span class="keyword">const</span>&amp; m, pubsub::AckHandler h) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Received message &quot;</span> &lt;&lt; m &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      std::move(h).ack();</div><div class="line">      {</div><div class="line">        std::lock_guard&lt;std::mutex&gt; lk(mu);</div><div class="line">        <span class="keywordflow">if</span> (++count &lt; kExpectedMessageCount) <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      cv.notify_one();</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">// Change the flow control watermarks, by default the client library uses</span></div><div class="line">    <span class="comment">// 0 and 1,000 for the message count watermarks, and 0 and 10MiB for the</span></div><div class="line">    <span class="comment">// size watermarks. Recall that the library stops requesting messages if</span></div><div class="line">    <span class="comment">// any of the high watermarks are reached, and the library resumes</span></div><div class="line">    <span class="comment">// requesting messages when *both* low watermarks are reached.</span></div><div class="line">    <span class="keyword">auto</span> constexpr kMiB = 1024 * 1024L;</div><div class="line">    <span class="keyword">auto</span> session = subscriber.Subscribe(</div><div class="line">        subscription, std::move(handler),</div><div class="line">        pubsub::SubscriptionOptions{}</div><div class="line">            .set_message_count_watermarks(<span class="comment">/*lwm=*/</span>800, <span class="comment">/*hwm=*/</span>1000)</div><div class="line">            .set_message_size_watermarks(<span class="comment">/*lwm=*/</span>4 * kMiB, <span class="comment">/*hwm=*/</span>8 * kMiB));</div><div class="line">    {</div><div class="line">      std::unique_lock&lt;std::mutex&gt; lk(mu);</div><div class="line">      cv.wait(lk, [&amp;] { <span class="keywordflow">return</span> count &gt;= kExpectedMessageCount; });</div><div class="line">    }</div><div class="line">    session.cancel();</div><div class="line">    <span class="keyword">auto</span> status = session.get();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Message count: &quot;</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;, status: &quot;</span> &lt;&lt; status &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  }</div></div><!-- fragment --> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>applications that want to have a single pull request at a time, can set these parameters to <code>lwm==0</code> and <code>hwm==1</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwm</td><td>the high watermark, if this parameter is <code>0</code> the high watermark is set to <code>1</code>, to avoid starvation </td></tr>
    <tr><td class="paramname">lwm</td><td>the low watermark, if this parameter greater than <code>hwm</code> then the low watermark is set to the same value as the high watermark </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="subscription__options_8cc_source.html#l00023">23</a> of file <a class="el" href="subscription__options_8cc_source.html">subscription_options.cc</a>.</p>

</div>
</div>
<a id="a07ba86e5d31807ed11b9b6d3ffacf3d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07ba86e5d31807ed11b9b6d3ffacf3d2">&#9670;&nbsp;</a></span>set_message_size_watermarks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1pubsub_1_1v1_1_1SubscriptionOptions.html">SubscriptionOptions</a> &amp; google::cloud::pubsub::v1::SubscriptionOptions::set_message_size_watermarks </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>lwm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>hwm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the parameters for message-size-based flow control. </p>
<p>The Cloud Pub/Sub C++ client library will pull more messages from a subscription as long as the total size of the pending messages (that is received, but not fully processed is less than the high watermark (<code>hwm</code>). Once the <code>hwm</code> value is reached the client will not pull more messages until the total size of the pending messages is at or below the low watermark (<code>lwm</code>).</p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">pubsub</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1pubsub.html">google::cloud::pubsub</a>;</div><div class="line">  <span class="keyword">using</span> google::cloud::future;</div><div class="line">  <span class="keyword">using</span> google::cloud::StatusOr;</div><div class="line">  [](pubsub::Subscriber subscriber, pubsub::Subscription <span class="keyword">const</span>&amp; subscription) {</div><div class="line">    std::mutex mu;</div><div class="line">    std::condition_variable cv;</div><div class="line">    <span class="keywordtype">int</span> count = 0;</div><div class="line">    <span class="keyword">auto</span> constexpr kExpectedMessageCount = 4;</div><div class="line">    <span class="keyword">auto</span> handler = [&amp;](pubsub::Message <span class="keyword">const</span>&amp; m, pubsub::AckHandler h) {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Received message &quot;</span> &lt;&lt; m &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      std::move(h).ack();</div><div class="line">      {</div><div class="line">        std::lock_guard&lt;std::mutex&gt; lk(mu);</div><div class="line">        <span class="keywordflow">if</span> (++count &lt; kExpectedMessageCount) <span class="keywordflow">return</span>;</div><div class="line">      }</div><div class="line">      cv.notify_one();</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">// Change the flow control watermarks, by default the client library uses</span></div><div class="line">    <span class="comment">// 0 and 1,000 for the message count watermarks, and 0 and 10MiB for the</span></div><div class="line">    <span class="comment">// size watermarks. Recall that the library stops requesting messages if</span></div><div class="line">    <span class="comment">// any of the high watermarks are reached, and the library resumes</span></div><div class="line">    <span class="comment">// requesting messages when *both* low watermarks are reached.</span></div><div class="line">    <span class="keyword">auto</span> constexpr kMiB = 1024 * 1024L;</div><div class="line">    <span class="keyword">auto</span> session = subscriber.Subscribe(</div><div class="line">        subscription, std::move(handler),</div><div class="line">        pubsub::SubscriptionOptions{}</div><div class="line">            .set_message_count_watermarks(<span class="comment">/*lwm=*/</span>800, <span class="comment">/*hwm=*/</span>1000)</div><div class="line">            .set_message_size_watermarks(<span class="comment">/*lwm=*/</span>4 * kMiB, <span class="comment">/*hwm=*/</span>8 * kMiB));</div><div class="line">    {</div><div class="line">      std::unique_lock&lt;std::mutex&gt; lk(mu);</div><div class="line">      cv.wait(lk, [&amp;] { <span class="keywordflow">return</span> count &gt;= kExpectedMessageCount; });</div><div class="line">    }</div><div class="line">    session.cancel();</div><div class="line">    <span class="keyword">auto</span> status = session.get();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Message count: &quot;</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;, status: &quot;</span> &lt;&lt; status &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">  }</div></div><!-- fragment --> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>applications that want to have a single pull request at a time, can set these parameters to <code>lwm==0</code> and <code>hwm==1</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwm</td><td>the high watermark, if this parameter is <code>0</code> the high watermark is set to <code>1</code>, to avoid starvation </td></tr>
    <tr><td class="paramname">lwm</td><td>the low watermark, if this parameter greater than <code>hwm</code> then the low watermark is set to the same value as the high watermark </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="subscription__options_8cc_source.html#l00030">30</a> of file <a class="el" href="subscription__options_8cc_source.html">subscription_options.cc</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
