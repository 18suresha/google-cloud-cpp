<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Storage C++ Client: Google Cloud Storage C++ Client Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Storage C++ Client
   &#160;<span id="projectnumber">1.24.0</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Storage</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Google Cloud Storage C++ Client Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Google Cloud Storage (GCS) C++ Client library offers types and functions access GCS from C++11 applications. It offers full access to the GCS API, including operations to list, read, write, and delete <a href="https://cloud.google.com/storage/docs/key-terms#objects">GCS objects</a> and <a href="https://cloud.google.com/storage/docs/key-terms#buckets">buckets</a>. The library also provides functions to modify the IAM permissions on buckets, read and modify the metadata associated with objects and buckets, configure encryption keys, configure notifications via Cloud Pub/Sub, and change the access control list of object or buckets.</p>
<p>This library requires a C++11 compiler, it is supported (and tested) on multiple Linux distributions, as well as Windows and macOS. The <a href="https://github.com/googleapis/google-cloud-cpp/blob/master/google/cloud/storage/README%2Emd">README</a> on <a href="https://github.com/googleapis/google-cloud-cpp" title="GitHub Repository">GitHub</a> provides detailed instructions to install the necessary dependencies, as well as how to compile the client library.</p>
<h3><a class="anchor" id="autotoc_md0"></a>
Setting up your repo</h3>
<p>In order to use the Cloud Cloud Storage C++ client library from your own code, you'll need to configure your build system how to fetch and compile the Cloud C++ client library. The Cloud C++ client library natively supports the <a href="https://bazel.build/">Bazel</a> and <a href="https://cmake.org/">CMake</a> build systems. We've created a minimal, "Hello world", [quickstart repo][quickstart-link] that includes detailed instructions on how to compile the library for use in your application. You can fetch the source from <a href="https://github.com/googleapis/google-cloud-cpp" title="GitHub Repository">GitHub</a> as normal:</p>
<div class="fragment"><div class="line">git clone https://github.com/googleapis/google-cloud-cpp.git</div>
<div class="line">cd google-cloud-cpp/google/cloud/storage/quickstart</div>
</div><!-- fragment --><dl class="section user"><dt>Example: Quickstart</dt><dd></dd></dl>
<p>The following shows the code that you'll run in the <code>google/cloud/storage/quickstart/</code> directory, which should give you a taste of the Cloud Storage C++ client library API.</p>
<div class="fragment"><div class="line"><span class="comment">// Copyright 2018 Google LLC</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><span class="comment">// limitations under the License.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="client_8h.html">google/cloud/storage/client.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="storage__file__transfer__benchmark_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">  <span class="keywordflow">if</span> (argc != 2) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Missing bucket name.\n&quot;</span>;</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: quickstart &lt;bucket-name&gt;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line">  std::string <span class="keyword">const</span> bucket_name = argv[1];</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create aliases to make the code easier to read.</span></div>
<div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a client to communicate with Google Cloud Storage. This client</span></div>
<div class="line">  <span class="comment">// uses the default configuration for authentication and project id.</span></div>
<div class="line">  google::cloud::StatusOr&lt;gcs::Client&gt; client =</div>
<div class="line">      gcs::Client::CreateDefaultClient();</div>
<div class="line">  <span class="keywordflow">if</span> (!client) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to create Storage Client, status=&quot;</span> &lt;&lt; client.status()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> writer = client-&gt;WriteObject(bucket_name, <span class="stringliteral">&quot;quickstart.txt&quot;</span>);</div>
<div class="line">  writer &lt;&lt; <span class="stringliteral">&quot;Hello World!&quot;</span>;</div>
<div class="line">  writer.Close();</div>
<div class="line">  <span class="keywordflow">if</span> (writer.metadata()) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully created object: &quot;</span> &lt;&lt; *writer.metadata() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Error creating object: &quot;</span> &lt;&lt; writer.metadata().status()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> reader = client-&gt;ReadObject(bucket_name, <span class="stringliteral">&quot;quickstart.txt&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (!reader) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Error reading object: &quot;</span> &lt;&lt; reader.status() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  std::string contents{std::istreambuf_iterator&lt;char&gt;{reader}, {}};</div>
<div class="line">  std::cout &lt;&lt; contents &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1"></a>
API Notes</h2>
<ul>
<li><code>GOOGLE_CLOUD_CPP_ENABLE_CLOG=yes</code> turns on logging in the library, basically the library always "logs" but the logging infrastructure has no backend to actually print anything until the application sets a backend or they set this environment variable.</li>
<li><code>GOOGLE_CLOUD_PROJECT=...</code> is used in examples and integration tests to configure the GCP project.</li>
<li><code>CLOUD_STORAGE_ENABLE_TRACING=raw-client</code> enables logging for each "RPC" generated by the library.</li>
<li><code>CLOUD_STORAGE_ENABLE_TRACING=http</code> enables logging for the full http traffic generated by the library.</li>
<li><code>CLOUD_STORAGE_ENABLE_TRACING=raw-client,http</code> enables all logging.</li>
<li><code>CLOUD_STORAGE_EMULATOR_ENDPOINT=...</code> override the default endpoint used by the library, intended for testing only.</li>
<li><code>CLOUD_STORAGE_TESTBENCH_ENDPOINT=...</code> <b>DEPRECATED</b> please use <code>CLOUD_STORAGE_EMULATOR_ENDPOINT</code> instead.</li>
</ul>
<h3><a class="anchor" id="autotoc_md2"></a>
Experimental</h3>
<ul>
<li><code>GOOGLE_CLOUD_CPP_STORAGE_REST_CONFIG=...</code> configuration for the REST protocol, currently only the <code>disable-xml</code> value has any effect. Sometimes the application developer may want to test using an emulator that does not support XML, while the library defaults to XML for some media operations.</li>
<li><code>GOOGLE_CLOUD_CPP_STORAGE_GRPC_CONFIG=...</code> used with <code><a class="el" href="namespacegoogle_1_1cloud_1_1storage__experimental_1_1v1.html#ac090c76c650be677fdf7ce42744af607" title="Create a google::cloud::storage::Client object configured to use gRPC.">google::cloud::storage_experimental::DefaultGrpcClient()</a></code> to configure configure the gRPC protocol. Setting this to <code>media</code> enables gRPC for just media operations (reading and writing data), while setting this to <code>metadata</code> enables gRPC for all operations. Note that gRPC support is an early access program, contact Google Cloud support for details.</li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
Using GOOGLE_CLOUD_PROJECT to set the default project</h3>
<p>Some of the GCS APIs need a <a href="https://cloud.google.com/storage/docs/projects" title="Project Definition in GCS">project</a> as a parameter. For such APIs the application can (a) call an overload that takes the project id as a parameter, (b) define the project explicitly when the <code>Client</code> object is constructed, or (c) set the <code>GOOGLE_CLOUD_PROJECT</code> environment variable to the desired project id. If you have set this environment variable the code can be even simpler:</p>
<div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line">  using ::google::cloud::StatusOr;</div>
<div class="line">  [](<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">gcs::Client</a> client, std::string <span class="keyword">const</span>&amp; bucket_name) {</div>
<div class="line">    StatusOr&lt;gcs::BucketMetadata&gt; bucket_metadata =</div>
<div class="line">        client.<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a623666a4576e45b9f34166b63fed9cee">CreateBucket</a>(bucket_name, <a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1BucketMetadata.html">gcs::BucketMetadata</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!bucket_metadata) {</div>
<div class="line">      <span class="keywordflow">throw</span> std::runtime_error(bucket_metadata.status().message());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Bucket &quot;</span> &lt;&lt; bucket_metadata-&gt;name() &lt;&lt; <span class="stringliteral">&quot; created.&quot;</span></div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;\nFull Metadata: &quot;</span> &lt;&lt; *bucket_metadata &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">  }</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md4"></a>
Error Handling</h3>
<p>This library never throws exceptions to signal error. In general, the library returns a <a href="https://github.com/googleapis/google-cloud-cpp/blob/master/google/cloud/status_or.h"><code>StatusOr&lt;T&gt;</code></a> if an error is possible. Some functions return objects that already have an existing error handling mechanism, such as types derived from <code>std::ostream</code> where the application can check the <a href="https://en.cppreference.com/w/cpp/io/basic_ios/rdstate">state flags</a> to determine if there was an error. In these cases no <code>StatusOr</code> wrapper is used.</p>
<dl class="section user"><dt>Error Handling Example (without exceptions):</dt><dd></dd></dl>
<p>Applications that do not use exceptions to signal errors should check if the <code>StatusOr&lt;T&gt;</code> contains a value before using it. If the <code>StatusOr&lt;T&gt;</code> does contain a value then the <code>StatusOr&lt;T&gt;</code> can be used as a smart pointer to <code>T</code>. That is, <code>operator-&gt;()</code> and <code>operator*()</code> work as you would expect. If the <code>StatusOr&lt;T&gt;</code> does not contain a value then the error details are available using the <code>.status()</code> member function (and trying to access the value produces undefined behavior).</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line">[](<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">gcs::Client</a> client) {</div>
<div class="line">  google::cloud::StatusOr&lt;gcs::BucketMetadata&gt; metadata =</div>
<div class="line">    client.<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a985880a314d312836387ea3ed2d60598">GetBucketMetadata</a>(<span class="stringliteral">&quot;my-bucket&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!metadata) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;GetBucketMetadata: &quot;</span> &lt;&lt; metadata.status() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// use `metadata` as a smart pointer to `BucketMetadata`</span></div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The metadata for bucket &quot;</span> &lt;&lt; metadata-&gt;name()</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; *metadata &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>Error Handling Example (with exceptions):</dt><dd></dd></dl>
<p>Applications that use exceptions to signal errors can simply call <code>.value()</code> on the <code>StatusOr&lt;T&gt;</code> object. This will return a <code>T</code> if the <code>StatusOr&lt;T&gt;</code> object contains a value, and will otherwise throw an exception.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line">[](<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">gcs::Client</a> client) {</div>
<div class="line">  <a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1BucketMetadata.html">gcs::BucketMetadata</a> metadata = client.<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a985880a314d312836387ea3ed2d60598">GetBucketMetadata</a>(</div>
<div class="line">        <span class="stringliteral">&quot;my-bucket&quot;</span>).value();  <span class="comment">// throws on error</span></div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The metadata for bucket &quot;</span> &lt;&lt; metadata.name()</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; metadata &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Retry, Backoff, and Idempotency Policies.</h3>
<p>The library automatically retries requests that fail with transient errors, and follows the <a href="https://cloud.google.com/storage/docs/exponential-backoff">recommended practice</a> to backoff between retries. Application developers can override the default <a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#a45a8cc7d57e5b12071421768233525ce">retry</a> and <a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#a0883868fbb34a196055da34973840304">backoff</a> policies:</p>
<div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line">  using ::google::cloud::StatusOr;</div>
<div class="line">  [](std::string <span class="keyword">const</span>&amp; bucket_name, std::string <span class="keyword">const</span>&amp; object_name,</div>
<div class="line">     std::string <span class="keyword">const</span>&amp; contents) {</div>
<div class="line">    <span class="comment">// Create a client that only gives up on the third error. The default policy</span></div>
<div class="line">    <span class="comment">// is to retry for several minutes.</span></div>
<div class="line">    StatusOr&lt;gcs::ClientOptions&gt; options =</div>
<div class="line">        gcs::ClientOptions::CreateDefaultClientOptions();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!options) <span class="keywordflow">throw</span> std::runtime_error(options.status().message());</div>
<div class="line">    <a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">gcs::Client</a> client{*options, <a class="code" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#ab54a92cdc68e307e616c0fd285e42fbb">gcs::LimitedErrorCountRetryPolicy</a>(3)};</div>
<div class="line"> </div>
<div class="line">    StatusOr&lt;gcs::ObjectMetadata&gt; object_metadata =</div>
<div class="line">        client.<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#aaa5920dadab0648d04b8f4d7506e49df">InsertObject</a>(bucket_name, object_name, std::move(contents),</div>
<div class="line">                            <a class="code" href="structgoogle_1_1cloud_1_1storage_1_1v1_1_1IfGenerationMatch.html">gcs::IfGenerationMatch</a>(0));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!object_metadata) {</div>
<div class="line">      <span class="keywordflow">throw</span> std::runtime_error(object_metadata.status().message());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;The object &quot;</span> &lt;&lt; object_metadata-&gt;name()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot; was created in bucket &quot;</span> &lt;&lt; object_metadata-&gt;bucket()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;\nFull metadata: &quot;</span> &lt;&lt; *object_metadata &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">  }</div>
</div><!-- fragment --><p> The default policies are to continue retrying for up to 15 minutes, and to use truncated (at 5 minutes) exponential backoff, doubling the maximum backoff period between retries.</p>
<p>By default the library retries all operations, even those that are not idempotent. Application developers can override the <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#ac478e08bf900470ab72934860933d563">idempotency policy</a> to follow a more conservative approach:</p>
<div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">gcs</a> = <a class="code" href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a>;</div>
<div class="line">  using ::google::cloud::StatusOr;</div>
<div class="line">  [](std::string <span class="keyword">const</span>&amp; bucket_name, std::string <span class="keyword">const</span>&amp; object_name,</div>
<div class="line">     std::string <span class="keyword">const</span>&amp; contents) {</div>
<div class="line">    <span class="comment">// Create a client that only retries idempotent operations, the default is</span></div>
<div class="line">    <span class="comment">// to retry all operations.</span></div>
<div class="line">    StatusOr&lt;gcs::ClientOptions&gt; options =</div>
<div class="line">        gcs::ClientOptions::CreateDefaultClientOptions();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!options) <span class="keywordflow">throw</span> std::runtime_error(options.status().message());</div>
<div class="line">    <a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">gcs::Client</a> client{*options, <a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1StrictIdempotencyPolicy.html">gcs::StrictIdempotencyPolicy</a>()};</div>
<div class="line">    StatusOr&lt;gcs::ObjectMetadata&gt; object_metadata =</div>
<div class="line">        client.<a class="code" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#aaa5920dadab0648d04b8f4d7506e49df">InsertObject</a>(bucket_name, object_name, std::move(contents),</div>
<div class="line">                            <a class="code" href="structgoogle_1_1cloud_1_1storage_1_1v1_1_1IfGenerationMatch.html">gcs::IfGenerationMatch</a>(0));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!object_metadata) {</div>
<div class="line">      <span class="keywordflow">throw</span> std::runtime_error(object_metadata.status().message());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;The object &quot;</span> &lt;&lt; object_metadata-&gt;name()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot; was created in bucket &quot;</span> &lt;&lt; object_metadata-&gt;bucket()</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot;\nFull metadata: &quot;</span> &lt;&lt; *object_metadata &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">  }</div>
</div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#a36cdd8ecff0a125c2bc055c9fcae2684">LimitedTimeRetryPolicy</a> and <a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#ab54a92cdc68e307e616c0fd285e42fbb">LimitedErrorCountRetryPolicy</a> for alternative retry policies.</dd>
<dd>
<a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#ae32f5e2f6c51bfb3d219f48f29d7b961">ExponentialBackoffPolicy</a> to configure different parameters for the exponential backoff policy.</dd>
<dd>
<a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1AlwaysRetryIdempotencyPolicy.html">AlwaysRetryIdempotencyPolicy</a> and <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1StrictIdempotencyPolicy.html">StrictIdempotencyPolicy</a> for alternative idempotency policies.</dd></dl>
<h3><a class="anchor" id="autotoc_md6"></a>
Next Steps</h3>
<p>The documentation for each member function in the <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">Client</a> class includes short snippets on how to call the function. The snippets for <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a80bbd702b90dd38287b9bf1248272dbe">ReadObject()</a>, <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#ad49c1798f3a14605eea3ceb45cf1d729">WriteObject()</a>, <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#adb93b7bafce26b0c39b8c232dffba98b">ListObjects()</a>, and <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#ac8302d978bcf6440d6e151352488e2fa">DeleteObject()</a> are good places to continue learning about the library.</p>
<p><a class="el" href="storage-mocking.html">Example for mocking GCS C++ Client</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="astructgoogle_1_1cloud_1_1storage_1_1v1_1_1IfGenerationMatch_html"><div class="ttname"><a href="structgoogle_1_1cloud_1_1storage_1_1v1_1_1IfGenerationMatch.html">google::cloud::storage::v1::IfGenerationMatch</a></div><div class="ttdoc">A pre-condition: the request succeeds only if the object generation matches.</div><div class="ttdef"><b>Definition:</b> <a href="well__known__parameters_8h_source.html#l00156">well_known_parameters.h:157</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1Client_html_a985880a314d312836387ea3ed2d60598"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a985880a314d312836387ea3ed2d60598">google::cloud::storage::v1::Client::GetBucketMetadata</a></div><div class="ttdeci">StatusOr&lt; BucketMetadata &gt; GetBucketMetadata(std::string const &amp;bucket_name, Options &amp;&amp;... options)</div><div class="ttdoc">Fetches the bucket metadata.</div><div class="ttdef"><b>Definition:</b> <a href="client_8h_source.html#l00410">client.h:410</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1Client_html"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html">google::cloud::storage::v1::Client</a></div><div class="ttdoc">The Google Cloud Storage (GCS) Client.</div><div class="ttdef"><b>Definition:</b> <a href="client_8h_source.html#l00187">client.h:187</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1StrictIdempotencyPolicy_html"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1StrictIdempotencyPolicy.html">google::cloud::storage::v1::StrictIdempotencyPolicy</a></div><div class="ttdoc">A IdempotencyPolicy that only retries strictly idempotent requests.</div><div class="ttdef"><b>Definition:</b> <a href="idempotency__policy_8h_source.html#l00321">idempotency_policy.h:321</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1BucketMetadata_html"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1BucketMetadata.html">google::cloud::storage::v1::BucketMetadata</a></div><div class="ttdoc">Represents a Google Cloud Storage Bucket Metadata object.</div><div class="ttdef"><b>Definition:</b> <a href="bucket__metadata_8h_source.html#l00506">bucket_metadata.h:506</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1cloud_1_1storage_1_1v1_html_ab54a92cdc68e307e616c0fd285e42fbb"><div class="ttname"><a href="namespacegoogle_1_1cloud_1_1storage_1_1v1.html#ab54a92cdc68e307e616c0fd285e42fbb">google::cloud::storage::v1::LimitedErrorCountRetryPolicy</a></div><div class="ttdeci">google::cloud::internal::LimitedErrorCountRetryPolicy&lt; internal::StatusTraits &gt; LimitedErrorCountRetryPolicy</div><div class="ttdoc">Keep retrying until the error count has been exceeded.</div><div class="ttdef"><b>Definition:</b> <a href="retry__policy_8h_source.html#l00048">retry_policy.h:50</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1cloud_1_1storage_html"><div class="ttname"><a href="namespacegoogle_1_1cloud_1_1storage.html">google::cloud::storage</a></div><div class="ttdoc">Contains all the Google Cloud Storage C++ client APIs.</div><div class="ttdef"><b>Definition:</b> <a href="bucket__access__control_8cc_source.html#l00020">bucket_access_control.cc:20</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1Client_html_a623666a4576e45b9f34166b63fed9cee"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#a623666a4576e45b9f34166b63fed9cee">google::cloud::storage::v1::Client::CreateBucket</a></div><div class="ttdeci">StatusOr&lt; BucketMetadata &gt; CreateBucket(std::string bucket_name, BucketMetadata metadata, Options &amp;&amp;... options)</div><div class="ttdoc">Creates a new Google Cloud Storage bucket using the default project.</div><div class="ttdef"><b>Definition:</b> <a href="client_8h_source.html#l00348">client.h:348</a></div></div>
<div class="ttc" id="aclient_8h_html"><div class="ttname"><a href="client_8h.html">client.h</a></div></div>
<div class="ttc" id="astorage__file__transfer__benchmark_8cc_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="storage__file__transfer__benchmark_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="storage__file__transfer__benchmark_8cc_source.html#l00065">storage_file_transfer_benchmark.cc:65</a></div></div>
<div class="ttc" id="aclassgoogle_1_1cloud_1_1storage_1_1v1_1_1Client_html_aaa5920dadab0648d04b8f4d7506e49df"><div class="ttname"><a href="classgoogle_1_1cloud_1_1storage_1_1v1_1_1Client.html#aaa5920dadab0648d04b8f4d7506e49df">google::cloud::storage::v1::Client::InsertObject</a></div><div class="ttdeci">StatusOr&lt; ObjectMetadata &gt; InsertObject(std::string const &amp;bucket_name, std::string const &amp;object_name, std::string contents, Options &amp;&amp;... options)</div><div class="ttdoc">Creates an object given its name and contents.</div><div class="ttdef"><b>Definition:</b> <a href="client_8h_source.html#l00903">client.h:903</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
