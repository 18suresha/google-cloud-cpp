<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud Storage C++ Client: google::cloud::storage::v0::oauth2::ComputeEngineCredentials&lt; HttpRequestBuilderType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud Storage C++ Client
   &#160;<span id="projectnumber">0.7.0</span>
   </div>
   <div id="projectbrief">A C++ Client Library for Google Cloud Storage</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegoogle.html">google</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud.html">cloud</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v0.html">v0</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2.html">oauth2</a></li><li class="navelem"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">ComputeEngineCredentials</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">google::cloud::storage::v0::oauth2::ComputeEngineCredentials&lt; HttpRequestBuilderType &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrapper class for Google OAuth 2.0 GCE instance service account credentials.  
 <a href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="compute__engine__credentials_8h_source.html">google/cloud/storage/oauth2/compute_engine_credentials.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a27d5bf439fb29173937d3f31455dcc23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#a27d5bf439fb29173937d3f31455dcc23">ComputeEngineCredentials</a> ()</td></tr>
<tr class="separator:a27d5bf439fb29173937d3f31455dcc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e3d84deff8f428699cc024d553e0584"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#a2e3d84deff8f428699cc024d553e0584">ComputeEngineCredentials</a> (std::string const &amp;<a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#aac8b63997425aeae32e133c0878d0bf4">service_account_email</a>)</td></tr>
<tr class="separator:a2e3d84deff8f428699cc024d553e0584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13dd4a67e00dadad8298251e221eaf46"><td class="memItemLeft" align="right" valign="top">StatusOr&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#a13dd4a67e00dadad8298251e221eaf46">AuthorizationHeader</a> () override</td></tr>
<tr class="memdesc:a13dd4a67e00dadad8298251e221eaf46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to obtain a value for the Authorization HTTP header.  <a href="#a13dd4a67e00dadad8298251e221eaf46">More...</a><br /></td></tr>
<tr class="separator:a13dd4a67e00dadad8298251e221eaf46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac8b63997425aeae32e133c0878d0bf4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#aac8b63997425aeae32e133c0878d0bf4">service_account_email</a> ()</td></tr>
<tr class="memdesc:aac8b63997425aeae32e133c0878d0bf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the email or alias of this credential's service account.  <a href="#aac8b63997425aeae32e133c0878d0bf4">More...</a><br /></td></tr>
<tr class="separator:aac8b63997425aeae32e133c0878d0bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250080a7a503749fc666af1358473f31"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#a250080a7a503749fc666af1358473f31">scopes</a> ()</td></tr>
<tr class="memdesc:a250080a7a503749fc666af1358473f31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the set of scopes granted to this credential's service account.  <a href="#a250080a7a503749fc666af1358473f31">More...</a><br /></td></tr>
<tr class="separator:a250080a7a503749fc666af1358473f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename HttpRequestBuilderType = storage::internal::CurlRequestBuilder&gt;<br />
class google::cloud::storage::v0::oauth2::ComputeEngineCredentials&lt; HttpRequestBuilderType &gt;</h3>

<p>Wrapper class for Google OAuth 2.0 GCE instance service account credentials. </p>
<p>Takes a service account email address or alias (e.g. "default") and uses the Google Compute Engine instance's metadata server to obtain service account metadata and OAuth 2.0 access tokens as needed. Instances of this class should usually be created via the convenience methods declared in <a class="el" href="google__credentials_8h.html">google_credentials.h</a>.</p>
<p>An HTTP Authorization header, with an access token as its value, can be obtained by calling the <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html#a13dd4a67e00dadad8298251e221eaf46" title="Attempts to obtain a value for the Authorization HTTP header. ">AuthorizationHeader()</a> method; if the current access token is invalid or nearing expiration, this will class will first obtain a new access token before returning the Authorization header string.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://cloud.google.com/compute/docs/authentication#using">https://cloud.google.com/compute/docs/authentication#using</a> for details on how to get started with Compute Engine service account credentials.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">HttpRequestBuilderType</td><td>a dependency injection point. It makes it possible to mock internal libcurl wrappers. This should generally not be overridden except for testing. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00060">60</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a27d5bf439fb29173937d3f31455dcc23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27d5bf439fb29173937d3f31455dcc23">&#9670;&nbsp;</a></span>ComputeEngineCredentials() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpRequestBuilderType  = storage::internal::CurlRequestBuilder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">google::cloud::storage::v0::oauth2::ComputeEngineCredentials</a>&lt; HttpRequestBuilderType &gt;::<a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">ComputeEngineCredentials</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00062">62</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>

</div>
</div>
<a id="a2e3d84deff8f428699cc024d553e0584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e3d84deff8f428699cc024d553e0584">&#9670;&nbsp;</a></span>ComputeEngineCredentials() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpRequestBuilderType  = storage::internal::CurlRequestBuilder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">google::cloud::storage::v0::oauth2::ComputeEngineCredentials</a>&lt; HttpRequestBuilderType &gt;::<a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">ComputeEngineCredentials</a> </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>service_account_email</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00064">64</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a13dd4a67e00dadad8298251e221eaf46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13dd4a67e00dadad8298251e221eaf46">&#9670;&nbsp;</a></span>AuthorizationHeader()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpRequestBuilderType  = storage::internal::CurlRequestBuilder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StatusOr&lt;std::string&gt; <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">google::cloud::storage::v0::oauth2::ComputeEngineCredentials</a>&lt; HttpRequestBuilderType &gt;::AuthorizationHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to obtain a value for the Authorization HTTP header. </p>
<p>If unable to obtain a value for the Authorization header, which could happen for <code><a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1Credentials.html" title="Interface for OAuth 2.0 credentials used to access Google Cloud services. ">Credentials</a></code> that need to be periodically refreshed, the underyling <code>Status</code> will indicate failure details from the refresh HTTP request. Otherwise, the returned value will contain the Authorization header to be used in HTTP requests. </p>

<p>Implements <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1Credentials.html#af33f7ebbee999a44711a068f1d634547">google::cloud::storage::v0::oauth2::Credentials</a>.</p>

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00067">67</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>

</div>
</div>
<a id="a250080a7a503749fc666af1358473f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250080a7a503749fc666af1358473f31">&#9670;&nbsp;</a></span>scopes()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpRequestBuilderType  = storage::internal::CurlRequestBuilder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">google::cloud::storage::v0::oauth2::ComputeEngineCredentials</a>&lt; HttpRequestBuilderType &gt;::scopes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the set of scopes granted to this credential's service account. </p>
<dl class="section note"><dt>Note</dt><dd>Because this class must query the Compute Engine instance's metadata server to fetch service account metadata, this method will return an empty set if the credential has not been refreshed yet. </dd></dl>

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00093">93</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>

</div>
</div>
<a id="aac8b63997425aeae32e133c0878d0bf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac8b63997425aeae32e133c0878d0bf4">&#9670;&nbsp;</a></span>service_account_email()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpRequestBuilderType  = storage::internal::CurlRequestBuilder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classgoogle_1_1cloud_1_1storage_1_1v0_1_1oauth2_1_1ComputeEngineCredentials.html">google::cloud::storage::v0::oauth2::ComputeEngineCredentials</a>&lt; HttpRequestBuilderType &gt;::service_account_email </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the email or alias of this credential's service account. </p>
<dl class="section note"><dt>Note</dt><dd>This class must query the Compute Engine instance's metadata server to fetch service account metadata. Because of this, if an alias (e.g. "default") was supplied in place of an actual email address when initializing this credential, that alias is returned as this credential's email address if the credential has not been refreshed yet. </dd></dl>

<p class="definition">Definition at line <a class="el" href="compute__engine__credentials_8h_source.html#l00081">81</a> of file <a class="el" href="compute__engine__credentials_8h_source.html">compute_engine_credentials.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
