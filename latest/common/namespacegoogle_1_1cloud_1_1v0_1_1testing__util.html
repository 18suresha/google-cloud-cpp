<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google Cloud C++ Client: google::cloud::v0::testing_util Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Google Cloud C++ Client
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
   <div id="projectbrief">C++ Client Library for Google Cloud Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegoogle.html">google</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud.html">cloud</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1v0.html">v0</a></li><li class="navelem"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html">testing_util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">google::cloud::v0::testing_util Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacegoogle_1_1cloud_1_1v0_1_1testing__util_1_1chrono__literals"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util_1_1chrono__literals.html">chrono_literals</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1CaptureLogLinesBackend.html">CaptureLogLinesBackend</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A log backend that stores all the log lines.  <a href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1CaptureLogLinesBackend.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1EnvironmentVariableRestore.html">EnvironmentVariableRestore</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper class to restore the value of environment variables.  <a href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1EnvironmentVariableRestore.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1NoDefaultConstructor.html">NoDefaultConstructor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class without a default constructor.  <a href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1NoDefaultConstructor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1Observable.html">Observable</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class that counts calls to its constructors.  <a href="classgoogle_1_1cloud_1_1v0_1_1testing__util_1_1Observable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8e56044d27b37aa018a2ec56891cf130"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html#a8e56044d27b37aa018a2ec56891cf130">InitGoogleMock</a> (int &amp;argc, char *argv[])</td></tr>
<tr class="memdesc:a8e56044d27b37aa018a2ec56891cf130"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the GoogleTest framework including some custom settings for google-cloud-cpp.  <a href="#a8e56044d27b37aa018a2ec56891cf130">More...</a><br /></td></tr>
<tr class="separator:a8e56044d27b37aa018a2ec56891cf130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fbf5bbc0073737ec76f584ba68d0228"><td class="memTemplParams" colspan="2">template&lt;typename Predicate &gt; </td></tr>
<tr class="memitem:a6fbf5bbc0073737ec76f584ba68d0228"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html#a6fbf5bbc0073737ec76f584ba68d0228">CheckPredicateBecomesFalse</a> (Predicate &amp;&amp;predicate, std::chrono::system_clock::time_point deadline, std::chrono::milliseconds tolerance)</td></tr>
<tr class="memdesc:a6fbf5bbc0073737ec76f584ba68d0228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that an assertion becomes false after some prescribed time.  <a href="#a6fbf5bbc0073737ec76f584ba68d0228">More...</a><br /></td></tr>
<tr class="separator:a6fbf5bbc0073737ec76f584ba68d0228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e4de26721dc2f0461ae3a3d03fcc70"><td class="memTemplParams" colspan="2">template&lt;typename ExpectedException &gt; </td></tr>
<tr class="memitem:a66e4de26721dc2f0461ae3a3d03fcc70"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html#a66e4de26721dc2f0461ae3a3d03fcc70">ExpectException</a> (std::function&lt; void()&gt; const &amp;expression, std::function&lt; void(ExpectedException const &amp;ex)&gt; const &amp;validator, char const *expected_message)</td></tr>
<tr class="memdesc:a66e4de26721dc2f0461ae3a3d03fcc70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that a given functor raises <code>T</code> and run a test if it does.  <a href="#a66e4de26721dc2f0461ae3a3d03fcc70">More...</a><br /></td></tr>
<tr class="separator:a66e4de26721dc2f0461ae3a3d03fcc70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c54e73da76830082f9771f199d50b50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html#a9c54e73da76830082f9771f199d50b50">ExpectNoException</a> (std::function&lt; void()&gt; const &amp;expression)</td></tr>
<tr class="memdesc:a9c54e73da76830082f9771f199d50b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that an expression does not throw.  <a href="#a9c54e73da76830082f9771f199d50b50">More...</a><br /></td></tr>
<tr class="separator:a9c54e73da76830082f9771f199d50b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911392cf20293ab0f40e32e6bcb1b401"><td class="memTemplParams" colspan="2">template&lt;typename Functor &gt; </td></tr>
<tr class="memitem:a911392cf20293ab0f40e32e6bcb1b401"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacegoogle_1_1cloud_1_1v0_1_1testing__util.html#a911392cf20293ab0f40e32e6bcb1b401">ExpectFutureError</a> (Functor functor, std::future_errc code)</td></tr>
<tr class="memdesc:a911392cf20293ab0f40e32e6bcb1b401"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that a given functor raises <code>std::future_error</code> with the right error code.  <a href="#a911392cf20293ab0f40e32e6bcb1b401">More...</a><br /></td></tr>
<tr class="separator:a911392cf20293ab0f40e32e6bcb1b401"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6fbf5bbc0073737ec76f584ba68d0228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbf5bbc0073737ec76f584ba68d0228">&#9670;&nbsp;</a></span>CheckPredicateBecomesFalse()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Predicate &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void google::cloud::v0::testing_util::CheckPredicateBecomesFalse </td>
          <td>(</td>
          <td class="paramtype">Predicate &amp;&amp;&#160;</td>
          <td class="paramname"><em>predicate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::system_clock::time_point&#160;</td>
          <td class="paramname"><em>deadline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>tolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that an assertion becomes false after some prescribed time. </p>
<p>Test that an assertion is initially true, but eventually becomes false after some prescribed time. Use tolerance to avoid creating flaky tests. </p>

<p class="definition">Definition at line <a class="el" href="check__predicate__becomes__false_8h_source.html#l00034">34</a> of file <a class="el" href="check__predicate__becomes__false_8h_source.html">check_predicate_becomes_false.h</a>.</p>

</div>
</div>
<a id="a66e4de26721dc2f0461ae3a3d03fcc70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e4de26721dc2f0461ae3a3d03fcc70">&#9670;&nbsp;</a></span>ExpectException()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ExpectedException &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void google::cloud::v0::testing_util::ExpectException </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void()&gt; const &amp;&#160;</td>
          <td class="paramname"><em>expression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(ExpectedException const &amp;ex)&gt; const &amp;&#160;</td>
          <td class="paramname"><em>validator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>expected_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that a given functor raises <code>T</code> and run a test if it does. </p>
<p><code>EXPECT_THROW()</code> validates the type of an exception, but does not validate its contents. Most of the time the type is enough, but in some tests need to be more detailed. The common idiom in that case is to write an explicit try/catch to validate the values and then rethrow:</p>
<div class="fragment"><div class="line">EXPECT_THROW(</div><div class="line">    <span class="keywordflow">try</span> { something_that_throws(); }</div><div class="line">    <span class="keywordflow">catch</span>(ExpectedException <span class="keyword">const</span>&amp; ex) {</div><div class="line">      <span class="comment">// Validate the contents of ex, e.g. EXPECT_EQ(..., ex.what());</span></div><div class="line">      <span class="keywordflow">throw</span>;</div><div class="line">    }, ExpectedException);</div></div><!-- fragment --><p>That works, but we need to compile (and run) the tests with <code>-fno-exceptions</code>. In that case the test becomes:</p>
<div class="fragment"><div class="line">EXPECT_DEATH_IF_SUPPORTED(something_that_throws(), <span class="stringliteral">&quot;expected death message&quot;</span>);</div></div><!-- fragment --><p>And, of course, these two cases need a <code>#ifdef</code> to detect if exceptions are enabled. This was getting tedious, so we refactor to this function. The expected use is:</p>
<div class="fragment"><div class="line">ExpectException&lt;MyException&gt;(</div><div class="line">    [&amp;] { something_that_throws(); },</div><div class="line">    [&amp;](MyException <span class="keyword">const</span>&amp; ex) {</div><div class="line">        EXPECT_EQ(<span class="stringliteral">&quot;everything is terrible&quot;</span>, ex.what());</div><div class="line">    },</div><div class="line">    <span class="stringliteral">&quot;terminating program: everything is terrible&quot;</span>);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">expression</td><td>the expression (typically a lambda) that is expected to raise an exception of type <code>ExpectedException</code>. </td></tr>
    <tr><td class="paramname">validator</td><td>a functor to validate the exception contents. </td></tr>
    <tr><td class="paramname">expected_message</td><td>if exceptions are disabled the program is expected to terminate, and <code>expected_message</code> is a regular expression matched against the program output. </td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ExpectedException</td><td>the type of exception. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="expect__exception_8h_source.html#l00073">73</a> of file <a class="el" href="expect__exception_8h_source.html">expect_exception.h</a>.</p>

</div>
</div>
<a id="a911392cf20293ab0f40e32e6bcb1b401"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911392cf20293ab0f40e32e6bcb1b401">&#9670;&nbsp;</a></span>ExpectFutureError()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Functor &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void google::cloud::v0::testing_util::ExpectFutureError </td>
          <td>(</td>
          <td class="paramtype">Functor&#160;</td>
          <td class="paramname"><em>functor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::future_errc&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that a given functor raises <code>std::future_error</code> with the right error code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">functor</td><td>the functor to call, typically a lambda that will perform the operation under test. </td></tr>
    <tr><td class="paramname">code</td><td>the expected error code. </td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Functor</td><td>the type of <code>functor</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="expect__future__error_8h_source.html#l00036">36</a> of file <a class="el" href="expect__future__error_8h_source.html">expect_future_error.h</a>.</p>

</div>
</div>
<a id="a9c54e73da76830082f9771f199d50b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c54e73da76830082f9771f199d50b50">&#9670;&nbsp;</a></span>ExpectNoException()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void google::cloud::v0::testing_util::ExpectNoException </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void()&gt; const &amp;&#160;</td>
          <td class="paramname"><em>expression</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verify that an expression does not throw. </p>
<p>Testing <code>void</code> expressions is tedious because <code>EXPECT_NO_THROW</code> does not compile when exceptions are disabled. Writing <code>expression()</code> in a test does detect exceptions, but does not express the intent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">expression</td><td>the expression (typically a lambda) that we want to verify does not throw. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="expect__exception_8h_source.html#l00100">100</a> of file <a class="el" href="expect__exception_8h_source.html">expect_exception.h</a>.</p>

</div>
</div>
<a id="a8e56044d27b37aa018a2ec56891cf130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e56044d27b37aa018a2ec56891cf130">&#9670;&nbsp;</a></span>InitGoogleMock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void google::cloud::v0::testing_util::InitGoogleMock </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the GoogleTest framework including some custom settings for google-cloud-cpp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>the number of elements in <code>argv</code> </td></tr>
    <tr><td class="paramname">argv</td><td>the command-line parameters for the program. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="init__google__mock_8cc_source.html#l00026">26</a> of file <a class="el" href="init__google__mock_8cc_source.html">init_google_mock.cc</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
